<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Product Registration Form</title>
    <link rel="stylesheet" href="style.css">
</head>

<body class="d-flex justify-content-center align-item-center">
    <form id="product" action="" class="mt-4">
        <h2><u>Registration Form</u></h2>
        <label for=""><b>Product Name : </b></label>
        <input type="text" class="form-control" name="pName" id="pName" autocomplete="username"
            placeholder="Enter Product Name..">
        <div id="err-pName" class="msg alert alert-danger d-none" role="alert"></div>

        <label class="mt-3" for="pCode"><b>Product Code :</b></label>
        <input type="text" class="form-control" name="pCode" id="pCode" placeholder="Enter Product Code:">

        <label class="mt-3" for="pRange"><b>Price Range :</b></label><br>
        <input type="range" class="slider" style="width: 100%;" id="minPrice" min="0" max="10000" step="1" value="0">
        <input type="range" class="slider" style="width: 100%;" id="maxPrice" min="0" max="10000" step="1" value="10000">
        <span><b>Minimum Price is : </b><span id="minRange" class="" style="background-color: burlywood;">0</span></span><br>
        <span><b>Maximum Price Is : </b><span id="maxRange" class="" style="background-color: burlywood;">0</span></span><br>

        <label class="mt-3" for="colorSelect"><b>Color Selection :</b></label><br>
        <input type="color" id="colorSelect" value="#ff0000">

        <div class="preview-box mt-3" style="background-color: #ff0000; text-align: center;" id="colorDisplay">Selected Color</div><br>
        <span><b>Color Name  : </b><span class="color-name" id="colorCode" style="background-color:bisque;"></span></span><br>


        <label class="mt-3" for="pDate"><b>Manufacturing Date :</b></label>
        <input type="date" class="form-control" id="pDate"><br>
        <div id="result"></div>
        <button type="submit" id="submit" class="btn btn-primary mt-2 float-end" name="submit">Submit</button>
    </form>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
<script>

    $(function () {

        // for prodect Name field

            $('#pName').on('input', function () {
                let inputText = $(this).val();

                let noNumbers = inputText.replace(/[0-9]/g, '');
                $(this).val(noNumbers);

                let capitalizedText = noNumbers.replace(/\b\w/g, function (match) {
                    return match.toUpperCase();
                });

                $(this).val(capitalizedText);

            });


            // for product code field
        $('#pCode').on('input', function () {

            let input = $(this).val();

            input = input.toUpperCase();

            input = input.replace(/[^A-Z0-9]/g, '');

            if (input.length > 3 && input[3] !== '-') {
                input = input.slice(0, 3) + '-' + input.slice(3);
            }

            if (input.length > 7) {
                input = input.slice(0, 7);
            }

            $(this).val(input);
        });


        // for product price range field
        function formatNumber(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }

        let minPriceSlider = $('#minPrice');
        let maxPriceSlider = $('#maxPrice');
        let minPriceValue = $('#minRange');
        let maxPriceValue = $('#maxRange');

        minPriceSlider.on('input', function () {
            let minValue = $(this).val();
            minPriceValue.text(formatNumber(minValue));
            if (parseInt(minValue) > parseInt(maxPriceSlider.val())) {
                maxPriceSlider.val(minValue);
                maxPriceValue.text(formatNumber(minValue));
            }
        });

        maxPriceSlider.on('input', function () {
            let maxValue = $(this).val();
            maxPriceValue.text(formatNumber(maxValue));
            if (parseInt(maxValue) < parseInt(minPriceSlider.val())) {
                minPriceSlider.val(maxValue);
                minPriceValue.text(formatNumber(maxValue));
            }
        });

        minPriceValue.text(formatNumber(minPriceSlider.val()));
        maxPriceValue.text(formatNumber(maxPriceSlider.val()));


        // for color Selection field


        $('#colorSelect').on('input', function() {
        var selectedColor = $(this).val();

        $('#colorDisplay').css('background-color', selectedColor);
        
        $('#colorCode').text(selectedColor);
      });
        
        // for Product Date field

        let today = new Date();
        let dd = String(today.getDate()).padStart(2, '0');
        let mm = String(today.getMonth() + 1).padStart(2, '0');
        let yyyy = today.getFullYear();

        today = yyyy + '-' + mm + '-' + dd;
        $('#pDate').attr('max', today);

        $('#submit').click(function () {
            var manufactureDate = $('#pDate').val();
            if (manufactureDate) {
                var manufactureDateObj = new Date(manufactureDate);
                var currentDate = new Date();
                var timeDifference = currentDate - manufactureDateObj;
                var daysDifference = Math.floor(timeDifference / (1000 * 3600 * 24));
                $('#result').html('Product Age: ' + daysDifference + ' days');
            } else {
                $('#result').html('Please enter a valid manufacturing date.');
            }
        });

        // for product name field

            $("#product").on('submit', function (e) {
            e.preventDefault();
            let min = 3;
            let userValid = $("#pName").val();
            let charlength = userValid.length;
            if (charlength < min) {
                $('#err-pName').html("*Product Name minimun 3 characters");
                $('#err-pName').removeClass('d-none');
                return false;
            }
            $('#err-pName').addClass('d-none');
            $('#err-pName').html('');
        })
        return true;

       
    })
</script>

</html>